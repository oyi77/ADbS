# ADbS Repository Structure - Clean Separation

## Overview

ADbS repository contains **only templates and tools**. User-specific files are **never committed** to the repository.

---

## What's in the Repository (Committed)

### Core Files
```
ADbS/
â”œâ”€â”€ bin/                    # Executables (adbs, workflow-enforcer)
â”œâ”€â”€ lib/                    # Core libraries
â”‚   â”œâ”€â”€ internal/          # Internal abstraction layers
â”‚   â”œâ”€â”€ platform_detector.sh
â”‚   â”œâ”€â”€ rules_generator.sh
â”‚   â””â”€â”€ ...
â”œâ”€â”€ templates/             # Templates for generation
â”‚   â”œâ”€â”€ rules/            # IDE rule templates (.mdc.template)
â”‚   â”œâ”€â”€ agents/           # Agent rule templates
â”‚   â””â”€â”€ ...
â”œâ”€â”€ .agent/workflows/      # Workflow definitions
â”œâ”€â”€ config/               # Default configurations
â”œâ”€â”€ docs/                 # Documentation
â”œâ”€â”€ tests/                # Unit tests
â”œâ”€â”€ install.sh            # Installation script
â”œâ”€â”€ VERSION               # Version file
â””â”€â”€ .gitignore            # Ignores user files
```

### Key Point
âœ… **Templates only** - No generated files
âœ… **Tools only** - No user data
âœ… **Workflows only** - No user work

---

## What's Generated (NOT Committed)

### User Work Directory
```
user-project/
â””â”€â”€ .adbs/                 # IGNORED - User's work
    â”œâ”€â”€ work/             # Active work items
    â”œâ”€â”€ archive/          # Completed work
    â””â”€â”€ internal/         # Internal state
```

### IDE Rules (Generated by `adbs setup`)
```
user-project/
â”œâ”€â”€ .cursor/rules/         # IGNORED - Generated for Cursor
â”œâ”€â”€ .windsurf/rules/       # IGNORED - Generated for Windsurf
â”œâ”€â”€ .rules                 # IGNORED - Generated for Zed
â””â”€â”€ .vscode/              # IGNORED - Generated for VS Code
```

### Task Files
```
user-project/
â”œâ”€â”€ tasks.json            # IGNORED - Old format
â””â”€â”€ .adbs-tasks.json      # IGNORED - New format
```

### Legacy Directories (Migrated)
```
user-project/
â”œâ”€â”€ .openspec/            # IGNORED - Migrated to .adbs/
â”œâ”€â”€ .sdd/                 # IGNORED - Migrated to .adbs/
â””â”€â”€ .workflow-enforcer/   # IGNORED - Migrated to .adbs/
```

---

## Installation Flow

### 1. User Installs ADbS

```bash
curl -sSL https://adbs.dev/install | bash
```

**What gets installed:**
```
~/.adbs/                   # ADbS installation directory
â”œâ”€â”€ bin/                  # Executables
â”œâ”€â”€ lib/                  # Libraries
â”œâ”€â”€ templates/            # Templates
â”œâ”€â”€ .agent/workflows/     # Workflow definitions
â””â”€â”€ ...
```

**What does NOT get installed:**
- âŒ No `.adbs/` user directory
- âŒ No IDE rules
- âŒ No user work
- âŒ No task files

### 2. User Runs Setup in Their Project

```bash
cd my-project
adbs setup
```

**What gets created in user's project:**
```
my-project/
â”œâ”€â”€ .adbs/                # User's work directory (empty)
â”‚   â”œâ”€â”€ work/
â”‚   â”œâ”€â”€ archive/
â”‚   â””â”€â”€ internal/
â”œâ”€â”€ .cursor/rules/        # Generated IDE rules (if Cursor detected)
â”‚   â”œâ”€â”€ adbs-workflow/RULE.md
â”‚   â””â”€â”€ ...
â””â”€â”€ AGENTS.md            # Generated from template
```

**Key Point:**
- âœ… Generated from templates in `~/.adbs/templates/`
- âœ… Specific to user's project
- âœ… Not committed to ADbS repository
- âœ… User can commit to their own repo if they want

---

## .gitignore Strategy

### ADbS Repository `.gitignore`

```gitignore
# User-specific directories
.adbs/
.cursor/
.windsurf/
.sdd/
.openspec/
.workflow-enforcer/

# Generated files
.rules
*.mdc
AGENTS.md
tasks.json
.adbs-tasks.json

# Keep templates
!.agent/
!templates/
```

**Result:**
- âœ… Templates committed
- âœ… Workflows committed
- âŒ User data ignored
- âŒ Generated files ignored

### User Project `.gitignore` (Recommended)

```gitignore
# ADbS internal state (optional - user choice)
.adbs/internal/

# ADbS work (optional - user choice)
# .adbs/work/
# .adbs/archive/

# IDE rules (optional - regenerate with adbs setup)
# .cursor/rules/
# .windsurf/rules/
```

**User can choose:**
- âœ… Commit `.adbs/work/` to share work items with team
- âœ… Commit IDE rules to share with team
- âœ… Ignore `.adbs/internal/` (internal state)

---

## Clean Separation Benefits

### For ADbS Repository

1. **No User Data** - Repository stays clean
2. **No Generated Files** - Only source templates
3. **Smaller Size** - No bloat from user files
4. **Clear Purpose** - Tools and templates only

### For Users

1. **Clean Install** - Only gets what they need
2. **Project-Specific** - Each project has own `.adbs/`
3. **Portable** - Can commit work to their repo
4. **Regenerable** - Can always regenerate with `adbs setup`

### For Teams

1. **Share Work** - Commit `.adbs/work/` to team repo
2. **Share Rules** - Commit IDE rules to team repo
3. **Consistent** - Everyone runs `adbs setup` to get same rules
4. **No Conflicts** - Each developer has own `.adbs/internal/`

---

## File Generation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADbS Repository (~/.adbs/)         â”‚
â”‚  â”œâ”€â”€ templates/rules/*.mdc.template â”‚
â”‚  â”œâ”€â”€ templates/agents/*.md          â”‚
â”‚  â””â”€â”€ .agent/workflows/*.md          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ adbs setup
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Project (my-project/)         â”‚
â”‚  â”œâ”€â”€ .cursor/rules/*.md (generated) â”‚
â”‚  â”œâ”€â”€ .adbs/ (created empty)         â”‚
â”‚  â””â”€â”€ AGENTS.md (generated)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ adbs new "feature"
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Work (.adbs/work/)            â”‚
â”‚  â””â”€â”€ 2025-12-30-feature/            â”‚
â”‚      â”œâ”€â”€ requirements.md            â”‚
â”‚      â”œâ”€â”€ proposal.md                â”‚
â”‚      â”œâ”€â”€ design.md                  â”‚
â”‚      â””â”€â”€ tasks.md                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary

### âœ… Clean Repository
- Only templates and tools committed
- No user data or generated files
- Small, focused codebase

### âœ… Clean Installation
- User gets tools only
- No pre-generated files
- No user data

### âœ… Clean Project Setup
- Files generated on-demand
- Project-specific configuration
- User controls what to commit

### âœ… Clear Separation
- **Repository** = Templates + Tools
- **Installation** = Copy of repository
- **Project** = Generated files + User work

**Result:** Clean, maintainable, and user-friendly! ğŸ‰
